{"Data":{"GitHub":{"Issues":[{"Id":"509712425","IsPullRequest":false,"CreatedAt":"2019-10-23T03:24:52","Actor":"ThomasGoulet73","Number":"2070","RawContent":null,"Title":"Error MSB4044 on build","State":"closed","Body":"I have recently cloned the wpf project for potentially making PRs, but as I was building the project using build.cmd, I had a MSB4044 error :\r\n\r\nC:\\Users\\\\{Username}\\Documents\\GitHub\\Wpf\\eng\\WpfArcadeSdk\\tools\\InjectModuleInitializer.targets(372,5): error MSB4044:\r\n The \"ILDasmTask\" task was not given a value for the required parameter \"ILDAsm\". [C:\\Users\\\\{Username}\\Documents\\GitHu\r\nb\\Wpf\\src\\Microsoft.DotNet.Wpf\\src\\PresentationCore\\PresentationCore.csproj].\r\n\r\nI tried building the CoreFX project and had no problems.\r\n\r\nI didn't really know where to report those kind of issues so sorry for the inconvenience if it wasn't at the right place.\r\n\r\nThank you !","Url":"https://github.com/dotnet/wpf/issues/2070","RelatedDescription":"Closed issue \"Error MSB4044 on build\" (#2070)"},{"Id":"511020760","IsPullRequest":true,"CreatedAt":"2019-10-23T02:05:28","Actor":"dotnet-maestro[bot]","Number":"2093","RawContent":null,"Title":"[master] Update dependencies from dotnet/winforms","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:256c8be3-de58-46f5-d219-08d6ba11f126)\r\n## From https://github.com/dotnet/winforms\r\n- **Build**: 20191022.7\r\n- **Date Produced**: 10/23/2019 1:15 AM\r\n- **Commit**: 4f9ddf34914d9b014fde363b8cc37f2a590b03b9\r\n- **Branch**: refs/heads/master\r\n- **Updates**:\r\n  - **Microsoft.Private.Winforms** -> 5.0.0-alpha1.19522.7\r\n\r\n[marker]: <> (End:256c8be3-de58-46f5-d219-08d6ba11f126)\r\n\r\n","Url":"https://github.com/dotnet/wpf/pull/2093","RelatedDescription":"Closed or merged PR \"[master] Update dependencies from dotnet/winforms\" (#2093)"},{"Id":"510986717","IsPullRequest":true,"CreatedAt":"2019-10-22T23:36:35","Actor":"arpitmathur","Number":"2092","RawContent":null,"Title":"Adding border to ToggleButton when checked in high-contrast themes","State":"open","Body":"Fixes #1458\r\n\r\n5.0 PR: https://github.com/dotnet/wpf/pull/1976\r\n\r\n# Description\r\n\r\nIn non-high contrast themes, when you check a ToggleButton and navigate to another control, we display the checked status by highlighting the button with a lighter shade of the selection color.\r\n\r\nWe don't follow this behavior in high contrast themes. The text is slightly-depressed upon checking but that is not visually apparent . When the ToggleButton does not have focus, there is a slight border which again, is not apparent.\r\n![highcontrastwhitetogglebutton_without_change](https://user-images.githubusercontent.com/5456126/65924723-e6ecda80-e3a2-11e9-860d-66c72212c0e0.png)\r\n\r\nIn the image above, the 'S', 'C' and 'I' buttons are checked. However, it's barely noticeable that 'S' and 'C' are checked. The checked status of the 'I' button is also not noticeable when it receives focus.\r\n\r\n\r\nThe fix here is to check for a toggle button to be checked when in a high-contrast theme, we then add a border around the button. When a checked button also has keyboard focus, we add a border in the background-color. When the user navigates away, the border color is the same as the selection-color.\r\n\r\nIn the image below, the 'S', 'C' and 'I' buttons are checked again. Here, it's visually apparent that they are all currently checked.\r\n![highcontrastwhitetogglebutton_with_change](https://user-images.githubusercontent.com/5456126/65924964-c709e680-e3a3-11e9-8eab-fd1016e4c3b3.png)\r\n\r\nIn this pull request, relevant changes are in lines 673:693 in Button.xaml, the remaining files are generated off those changes.\r\n# Customer Impact\r\n\r\nIn high contrast themes, when you check a ToggleButton, it is not visually apparent that the ToggleButton has been checked, both when the ToggleButton has keyboard focus and when it does not.\r\n# Regression\r\nNo. This was discovered during accessibility testing on .Net Core 3.0\r\n\r\n# Risk - Low\r\nThis change only affects the ToggleButton control when HighContrast mode is turned on.","Url":"https://github.com/dotnet/wpf/pull/2092","RelatedDescription":"Open PR \"Adding border to ToggleButton when checked in high-contrast themes\" (#2092)"},{"Id":"510983505","IsPullRequest":true,"CreatedAt":"2019-10-22T23:35:46","Actor":"dotnet-maestro[bot]","Number":"2091","RawContent":null,"Title":"[master] Update dependencies from dotnet/winforms","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:256c8be3-de58-46f5-d219-08d6ba11f126)\r\n## From https://github.com/dotnet/winforms\r\n- **Build**: 20191022.5\r\n- **Date Produced**: 10/22/2019 10:54 PM\r\n- **Commit**: 66b697b2c010c8f49d01af11863212a0caf18824\r\n- **Branch**: refs/heads/master\r\n- **Updates**:\r\n  - **Microsoft.Private.Winforms** -> 5.0.0-alpha1.19522.5\r\n\r\n[marker]: <> (End:256c8be3-de58-46f5-d219-08d6ba11f126)\r\n\r\n","Url":"https://github.com/dotnet/wpf/pull/2091","RelatedDescription":"Closed or merged PR \"[master] Update dependencies from dotnet/winforms\" (#2091)"},{"Id":"510975056","IsPullRequest":true,"CreatedAt":"2019-10-22T22:58:41","Actor":"arpitmathur","Number":"2090","RawContent":null,"Title":"Removing separators from SizeOfSet and PositionInSet counts","State":"open","Body":"Fixes #1467\r\n\r\n5.0 PR: https://github.com/dotnet/wpf/pull/1977\r\n\r\n# Description\r\n\r\nScreen readers were reading incorrect values of the number of menu items and their position since we were counting separators as MenuItems in the automation tree.\r\n\r\nI filtered for separators in the current MenuItems to fix the SizeOfSet count.\r\n\r\nI filtered for separators again for PositionInSet but added a short-circuit to break when you're at the element whose position you're trying to find. This short-circuit was added to not remove separators below the relevant MenuItem from the PositionInSet count.\r\n\r\n# Customer Impact\r\n\r\nNarrator and other screen readers read the wrong values of SizeOfSet and PositioninSet for each individual menu item. This is confusing for users with visual disabilities as they can not accurately tell what is being visually represented on the screen.\r\n\r\n# Regression\r\nNo. This was discovered during accessibility testing on .Net Core 3.0\r\n\r\n# Risk - Low\r\nWe're iterating over the menu items another time in a place where we're already iterating. Running another iteration through an enumerable does invalidate some caching but there doesn't seem to be an obviously better way to make this change. We rejected an approach storing the number of separators in a variable as the memory cost would always be paid and be higher than the time cost of another iteration.","Url":"https://github.com/dotnet/wpf/pull/2090","RelatedDescription":"Open PR \"Removing separators from SizeOfSet and PositionInSet counts\" (#2090)"},{"Id":"510962028","IsPullRequest":false,"CreatedAt":"2019-10-22T22:27:38","Actor":"vatsan-madhavan","Number":"2089","RawContent":null,"Title":"NULL HWND's attempted to be parented under SystemResources listener window cause unhanded exception","State":"open","Body":"When an `HwndHost `receives `SourceChanged `event, it goes through `BuildOrReparentWindow`. When the hosted window is invisible, it is usually reparented under a temporary windows maintained by WPF in the `SystemResources `class, until later on the window can be rebuilt and parented back to a valid parent. \r\n\r\nThere is a latent bug in this logic where in `NULL ` `HWND's `are attempted to be parented to `SystemResources `managed temporary windows. This bug goes back quite a while (.NET 4.5 likely). WPF seems to ignore the return value from `kernel32!SetParent` and not deal with this failure. This has not been a crashing failure until now. \r\n\r\nStarting .NET 4.8, there have been some changes to this codepath that have resulted in this bug becoming a crashing bug. In addition to calling `kernel32!SetParent `on a `NULL HWND`, WPF attempts to perform several other operations on the `HWND`, including querying its DPI characteristics (which returns invalid information). Once of the subsidiary steps returns an invalid value that in turn results in a crash with the following stack:\r\n\r\n```\r\nSystem.Collections.Generic.KeyNotFoundException: 'The given key was not present in the dictionary.'\r\nmscorlib.dll!System.Collections.Generic.Dictionary<System.__Canon, System.__Canon>.this[System.__Canon].get(System.__Canon key) Line 183\tC#\r\n \tPresentationFramework.dll!System.Windows.SystemResources.GetDpiAwarenessCompatibleNotificationWindow(System.Runtime.InteropServices.HandleRef hwnd) Line 1731\tC#\r\n \tPresentationFramework.dll!System.Windows.Interop.HwndHost.BuildOrReparentWindow() Line 1196\tC#\r\n \tPresentationFramework.dll!System.Windows.Interop.HwndHost.OnSourceChanged(object sender, System.Windows.SourceChangedEventArgs e) Line 1077\tC#\r\n \tPresentationCore.dll!System.Windows.SourceChangedEventArgs.InvokeEventHandler(System.Delegate genericHandler, object genericTarget) Line 142\tC#\r\n \tPresentationCore.dll!System.Windows.RoutedEventArgs.InvokeHandler(System.Delegate handler, object target) Line 341\tC#\r\n \tPresentationCore.dll!System.Windows.RoutedEventHandlerInfo.InvokeHandler(object target, System.Windows.RoutedEventArgs routedEventArgs) Line 81\tC#\r\n \tPresentationCore.dll!System.Windows.EventRoute.InvokeHandlersImpl(object source, System.Windows.RoutedEventArgs args, bool reRaised) Line 203\tC#\r\n \tPresentationCore.dll!System.Windows.UIElement.RaiseEventImpl(System.Windows.DependencyObject sender, System.Windows.RoutedEventArgs args) Line 2354\tC#\r\n \tPresentationCore.dll!System.Windows.UIElement.RaiseEvent(System.Windows.RoutedEventArgs e) Line 432\tC#\r\n \tPresentationCore.dll!System.Windows.PresentationSource.UpdateSourceOfElement(System.Windows.DependencyObject doTarget, System.Windows.DependencyObject doAncestor, System.Windows.DependencyObject doOldParent) Line 861\tC#\r\n \tPresentationCore.dll!System.Windows.PresentationSource.RootChanged(System.Windows.Media.Visual oldRoot, System.Windows.Media.Visual newRoot) Line 566\tC#\r\n \tPresentationCore.dll!System.Windows.Interop.HwndSource.RootVisualInternal.set(System.Windows.Media.Visual value) Line 699\tC#\r\n \tPresentationCore.dll!System.Windows.Interop.HwndSource.Dispose(bool disposing) Line 2895\tC#\t\r\n \tPresentationCore.dll!System.Windows.Interop.HwndSource.OnHwndDisposed(object sender, System.EventArgs args) Line 2819\tC#\r\n \tWindowsBase.dll!MS.Win32.HwndWrapper.Dispose(bool disposing, bool isHwndBeingDestroyed) Line 230\tC#\r\n \tWindowsBase.dll!MS.Win32.HwndWrapper.WndProc(System.IntPtr hwnd, int msg, System.IntPtr wParam, System.IntPtr lParam, ref bool handled) Line 360\tC#\r\n \tWindowsBase.dll!MS.Win32.HwndSubclass.DispatcherCallbackOperation(object o) Line 494\tC#\r\n \tWindowsBase.dll!System.Windows.Threading.ExceptionWrapper.InternalRealCall(System.Delegate callback, object args, int numArgs) Line 104\tC#\r\n \tWindowsBase.dll!System.Windows.Threading.ExceptionWrapper.TryCatchWhen(object source, System.Delegate callback, object args, int numArgs, System.Delegate catchHandler) Line 37\tC#\r\n \tWindowsBase.dll!System.Windows.Threading.Dispatcher.LegacyInvokeImpl(System.Windows.Threading.DispatcherPriority priority, System.TimeSpan timeout, System.Delegate method, object args, int numArgs) Line 1445\tC#\r\n \tWindowsBase.dll!MS.Win32.HwndSubclass.SubclassWndProc(System.IntPtr hwnd, int msg, System.IntPtr wParam, System.IntPtr lParam) Line 398\tC#\r\n```\r\n\r\nThis issue is related to, but not a duplicate of, #1198/#1953. That said, it affects the same sorts of scenarios described in #1198.  \r\n\r\n```C#\r\n// ****BUG*** \r\n// unconditional else block\r\n// hwnd.Handle could be IntPtr.Zero, bad things can happen here\r\n// ****BUG*** \r\n```\r\nhttps://github.com/dotnet/wpf/blob/ac9d1b7a6b0ee7c44fd2875a1174b820b3940619/src/Microsoft.DotNet.Wpf/src/PresentationFramework/System/Windows/Interop/HwndHost.cs#L979-L997\r\n\r\n","Url":"https://github.com/dotnet/wpf/issues/2089","RelatedDescription":"Open issue \"NULL HWND's attempted to be parented under SystemResources listener window cause unhanded exception\" (#2089)"},{"Id":"510955831","IsPullRequest":false,"CreatedAt":"2019-10-22T22:16:24","Actor":"vatsan-madhavan","Number":"2088","RawContent":null,"Title":"Context Menus (Popup) are sometimes broken in High-DPI applications in .NET 4.8 ","State":"open","Body":"https://github.com/microsoft/dotnet/issues/1036#issue-443322868\r\n\r\n> After installing .NET 4.8 we have observed that Context menus via the Popup class show strange effects.\r\n> \r\n> 1. Popup is placed at top left corner\r\n> 2. Popup comes up empty\r\n> 3. Popup has no styles applied\r\n> 4. Alternating behavior:\r\n>    a) Popup works.\r\n>    b) Popup comes up empty\r\n>    ....\r\n> \r\n> I have debugged that issue and found that the is Popup is sometimes destroyed while the popup window is meant to be created:\r\n> \r\n> The diff from .NET 4.7.2 to 4.8 shows this new code was added:\r\n> \r\n> ![image](https://user-images.githubusercontent.com/408821/57610465-28562800-7571-11e9-9168-b0c036706a22.png)\r\n> \r\n> This leads to the call stack that the popup is killed while it is beeing created:\r\n> \r\n> ```\r\n> 0:000> !ClrStack\r\n> OS Thread Id: 0x2180 (0)\r\n> Call Site\r\n> System.Windows.Controls.Primitives.Popup.DestroyWindow()\r\n> System.Windows.Controls.Primitives.Popup.CreateWindow(Boolean)\r\n> \r\n> System.Windows.Controls.Primitives.Popup.OnIsOpenChanged(System.Windows.DependencyObject, System.Windows.DependencyPropertyChangedEventArgs)\r\n> System.Windows.DependencyObject.OnPropertyChanged(System.Windows.DependencyPropertyChangedEventArgs)\r\n> System.Windows.FrameworkElement.OnPropertyChanged(System.Windows.DependencyPropertyChangedEventArgs)\r\n> System.Windows.DependencyObject.NotifyPropertyChange(System.Windows.DependencyPropertyChangedEventArgs)\r\n> System.Windows.DependencyObject.UpdateEffectiveValue(System.Windows.EntryIndex, System.Windows.DependencyProperty, System.Windows.PropertyMetadata, System.Windows.EffectiveValueEntry, System.Windows.EffectiveValueEntry ByRef, Boolean, Boolean, System.Windows.OperationType)\r\n> System.Windows.DependencyObject.InvalidateProperty(System.Windows.DependencyProperty, Boolean)\r\n> System.Windows.Data.BindingExpressionBase.Invalidate(Boolean)\r\n> System.Windows.Data.BindingExpression.TransferValue(System.Object, Boolean)\r\n> MS.Internal.Data.ClrBindingWorker.NewValueAvailable(Boolean, Boolean, Boolean)\r\n> MS.Internal.Data.PropertyPathWorker.UpdateSourceValueState(Int32, System.ComponentModel.ICollectionView, System.Object, Boolean)\r\n> MS.Internal.Data.PropertyPathWorker.OnDependencyPropertyChanged(System.Windows.DependencyObject, System.Windows.DependencyProperty, Boolean)\r\n> System.Windows.Data.BindingExpression.HandlePropertyInvalidation(System.Windows.DependencyObject, System.Windows.DependencyPropertyChangedEventArgs)\r\n> System.Windows.Data.BindingExpressionBase.OnPropertyInvalidation(System.Windows.DependencyObject, System.Windows.DependencyPropertyChangedEventArgs)\r\n> System.Windows.Data.BindingExpression.OnPropertyInvalidation(System.Windows.DependencyObject, System.Windows.DependencyPropertyChangedEventArgs)\r\n> System.Windows.DependentList.InvalidateDependents(System.Windows.DependencyObject, System.Windows.DependencyPropertyChangedEventArgs)\r\n> System.Windows.DependencyObject.NotifyPropertyChange(System.Windows.DependencyPropertyChangedEventArgs)\r\n> System.Windows.DependencyObject.UpdateEffectiveValue(System.Windows.EntryIndex, System.Windows.DependencyProperty, System.Windows.PropertyMetadata, System.Windows.EffectiveValueEntry, System.Windows.EffectiveValueEntry ByRef, Boolean, Boolean, System.Windows.OperationType)\r\n> System.Windows.DependencyObject.SetValueCommon(System.Windows.DependencyProperty, System.Object, System.Windows.PropertyMetadata, Boolean, Boolean, System.Windows.OperationType, Boolean)\r\n> System.Windows.DependencyObject.SetCurrentValueInternal(System.Windows.DependencyProperty, System.Object)\r\n> \r\n> System.Windows.Controls.PopupControlService.**RaiseContextMenuOpeningEvent**(System.Windows.IInputElement, Double, Double, Boolean)\r\n> \r\n> System.Windows.Controls.PopupControlService.ProcessMouseUp(System.Object, System.Windows.Input.MouseButtonEventArgs)\r\n> System.Windows.Controls.PopupControlService.OnPostProcessInput(System.Object, System.Windows.Input.ProcessInputEventArgs)\r\n> System.Windows.Input.InputManager.RaiseProcessInputEventHandlers(System.Windows.Input.ProcessInputEventHandler, System.Windows.Input.ProcessInputEventArgs)\r\n> System.Windows.Input.InputManager.ProcessStagingArea()\r\n> System.Windows.Input.InputManager.ProcessInput(System.Windows.Input.InputEventArgs)\r\n> System.Windows.Input.InputProviderSite.ReportInput(System.Windows.Input.InputReport)\r\n> System.Windows.Interop.HwndMouseInputProvider.ReportInput(IntPtr, System.Windows.Input.InputMode, Int32, System.Windows.Input.RawMouseActions, Int32, Int32, Int32)\r\n> System.Windows.Interop.HwndMouseInputProvider.FilterMessage(IntPtr, MS.Internal.Interop.WindowMessage, IntPtr, IntPtr, Boolean ByRef)\r\n> System.Windows.Interop.HwndSource.InputFilterMessage(IntPtr, Int32, IntPtr, IntPtr, Boolean ByRef)\r\n> ```\r\n> \r\n> To me this looks like an error. The window should not be killed when it is already (partially) active. This call should therefore be moved to the check where BuildWindow is beeing called.\r\n> After setting the AppContext switch\r\n> \r\n> ```\r\n>   <runtime>\r\n>     <AppContextSwitchOverrides value=\"Switch.System.Windows.DoNotScaleForDpiChanges=true\" />\r\n>   </runtime>\r\n> ```\r\n> \r\n> the issue does go away. This has therefore something to do with the monitor scaling flag during Popup.CreateWindow.\r\n","Url":"https://github.com/dotnet/wpf/issues/2088","RelatedDescription":"Open issue \"Context Menus (Popup) are sometimes broken in High-DPI applications in .NET 4.8 \" (#2088)"},{"Id":"510935378","IsPullRequest":true,"CreatedAt":"2019-10-22T21:55:24","Actor":"dotnet-maestro[bot]","Number":"2087","RawContent":null,"Title":"[master] Update dependencies from dotnet/winforms","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:256c8be3-de58-46f5-d219-08d6ba11f126)\r\n## From https://github.com/dotnet/winforms\r\n- **Build**: 20191022.4\r\n- **Date Produced**: 10/22/2019 9:17 PM\r\n- **Commit**: e260e163967f49417bc8a6d537ea6fbeb80d8d80\r\n- **Branch**: refs/heads/master\r\n- **Updates**:\r\n  - **Microsoft.Private.Winforms** -> 5.0.0-alpha1.19522.4\r\n\r\n[marker]: <> (End:256c8be3-de58-46f5-d219-08d6ba11f126)\r\n\r\n","Url":"https://github.com/dotnet/wpf/pull/2087","RelatedDescription":"Closed or merged PR \"[master] Update dependencies from dotnet/winforms\" (#2087)"},{"Id":"510907133","IsPullRequest":true,"CreatedAt":"2019-10-22T21:10:25","Actor":"dotnet-maestro[bot]","Number":"2086","RawContent":null,"Title":"[master] Update dependencies from dotnet/winforms","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:256c8be3-de58-46f5-d219-08d6ba11f126)\r\n## From https://github.com/dotnet/winforms\r\n- **Build**: 20191022.3\r\n- **Date Produced**: 10/22/2019 8:39 PM\r\n- **Commit**: f56aec1e41265912770e661a34400725da78d541\r\n- **Branch**: refs/heads/master\r\n- **Updates**:\r\n  - **Microsoft.Private.Winforms** -> 5.0.0-alpha1.19522.3\r\n\r\n[marker]: <> (End:256c8be3-de58-46f5-d219-08d6ba11f126)\r\n\r\n","Url":"https://github.com/dotnet/wpf/pull/2086","RelatedDescription":"Closed or merged PR \"[master] Update dependencies from dotnet/winforms\" (#2086)"},{"Id":"510870246","IsPullRequest":false,"CreatedAt":"2019-10-22T19:50:31","Actor":"rladuca","Number":"2085","RawContent":null,"Title":"Update XPS Serialization Stack for Packaging/Compression Semantic Changes","State":"open","Body":"In .NET Core 3, WPF changes to use the packaging and compression in Microsoft.NetCore.App instead of carrying WPF specific libraries in WindowsBase.dll.\n\nThis resulted in several compatibility problems with XPS document creation and manipulation.\n\n#575\n#597\n#1063\n#1363\n#1985\nWorkarounds have been generally done for much of these and some of these workarounds are encoded into the product itself.\n\nWPF should be updated in order to work well with the new sematics from System.IO.Packaging and System.IO.Compression. This will require a lot of investigation in several areas:\n\nXPS document creation and serialization\nPrinting\nGeneral package usage\nCreating this as an epic for now. Once more investigation is done into the scope for these changes, we can add specific tasks.","Url":"https://github.com/dotnet/wpf/issues/2085","RelatedDescription":"Open issue \"Update XPS Serialization Stack for Packaging/Compression Semantic Changes\" (#2085)"},{"Id":"510861086","IsPullRequest":true,"CreatedAt":"2019-10-22T19:40:33","Actor":"dotnet-maestro[bot]","Number":"2083","RawContent":null,"Title":"[master] Update dependencies from dotnet/winforms","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:256c8be3-de58-46f5-d219-08d6ba11f126)\r\n## From https://github.com/dotnet/winforms\r\n- **Build**: 20191022.2\r\n- **Date Produced**: 10/22/2019 7:13 PM\r\n- **Commit**: 646c002c3df9ef61aa6afeb5233d9a59e911ce36\r\n- **Branch**: refs/heads/master\r\n- **Updates**:\r\n  - **Microsoft.Private.Winforms** -> 5.0.0-alpha1.19522.2\r\n\r\n[marker]: <> (End:256c8be3-de58-46f5-d219-08d6ba11f126)\r\n\r\n[marker]: <> (Begin:Coherency Updates)\r\n## Coherency Updates\r\n\r\nThe following updates ensure that dependencies with a *CoherentParentDependency*\r\nattribute were produced in a build used as input to the parent dependency's build.\r\nSee [Dependency Description Format](https://github.com/dotnet/arcade/blob/master/Documentation/DependencyDescriptionFormat.md#dependency-description-overview)\r\n\r\n- **Microsoft.NETCore.App** -> 5.0.0-alpha1.19514.1 (parent: Microsoft.Private.Winforms)\r\n- **Microsoft.NETCore.ILDAsm** -> 5.0.0-alpha1.19513.3 (parent: Microsoft.NETCore.Runtime.CoreCLR)\r\n- **Microsoft.NETCore.Runtime.CoreCLR** -> 5.0.0-alpha1.19513.3 (parent: Microsoft.NETCore.App)\r\n- **Microsoft.NETCore.ILAsm** -> 5.0.0-alpha1.19513.3 (parent: Microsoft.NETCore.Runtime.CoreCLR)\r\n\r\n[marker]: <> (End:Coherency Updates)\r\n\r\n","Url":"https://github.com/dotnet/wpf/pull/2083","RelatedDescription":"Closed or merged PR \"[master] Update dependencies from dotnet/winforms\" (#2083)"},{"Id":"510386152","IsPullRequest":true,"CreatedAt":"2019-10-22T19:22:42","Actor":"vatsan-madhavan","Number":"2075","RawContent":null,"Title":"[release/3.1] Use correct PresentationBuildTasks.dll for VS and MSBuild builds","State":"closed","Body":"Port of https://github.com/dotnet/wpf/pull/1999\r\nFixes #1998 \r\n\r\n## Description \r\n\r\nThe PresentationBuildTasks.dll built out of the .NET Core codebase is not being used for msbuild based builds (i.e., when `$(MSBuildRuntimeType)==Full`) of WPF projects that use WindowsDesktop SDK. Instead, the PresentationBuildTasks.dll from GAC, i.e., the DLL that shipped with .NET Framework, is being used for builds instead.\r\n\r\nThis is because the *first* occurance of an `UsingTask` element that applies to a `TaskName` will always be used - it can not be overridden by subsequent `UsingTask` entries (this is unlike `Property` and `Item` behavior). See note in https://github.com/MicrosoftDocs/visualstudio-docs/blob/master/docs/msbuild/usingtask-element-msbuild.md immediate after the **Syntax** section (Note: The msbuild team added this note after identifying this behavior as part of investiaging this PresentationBuildTasks.dll issue).\r\n\r\nThis fix ensures that the `UsingTask` declarations supplied by the WindowsDesktop SDK precede those supplied by .NET Framework's copy of `Microsoft.WinFX.targets` by introducing a new `.props` file - `Microsoft.WinFX.props` - and moving a small number of `Property` and `UsingTask` declartions into it. Since `.props` are imported before `targets`, the `UsingTask` declarations supplied by WindowsDesktop SDK will thus take precedence.\r\n\r\nNote that `Pbt.props` is used only for building this repo - it doesn't ship.\r\n\r\n## Customer Impact \r\n\r\nMulti-targeted builds targeting .NET Framework will be produced incorrectly under some conditions, specifically when building using VS. There may be no problems initially due to the strong backwards compatibility between .NET Core and .NET Framework WPF assemblies - but errors in XAML/markup compilation may lead to hard-to-identify/debug problems. \r\n\r\n## Regression \r\n\r\nNot a regression. This was a missed corner case not caught until now. \r\n\r\n## Risk \r\n\r\n- The changes are scoped and  safe. \r\n- They have been tested by building a corpus of WPF samples \r\n- The fix has been in .NET 5 for 2 weeks now without any adverse reports. \r\n","Url":"https://github.com/dotnet/wpf/pull/2075","RelatedDescription":"Closed or merged PR \"[release/3.1] Use correct PresentationBuildTasks.dll for VS and MSBuild builds\" (#2075)"},{"Id":"510396211","IsPullRequest":true,"CreatedAt":"2019-10-22T18:56:18","Actor":"vatsan-madhavan","Number":"2076","RawContent":null,"Title":"[release/3.0] Use correct PresentationBuildTasks.dll for VS and MSBuild builds","State":"closed","Body":"Port of https://github.com/dotnet/wpf/pull/1999\r\nFixes #1998 \r\n\r\n## Description \r\n\r\nThe PresentationBuildTasks.dll built out of the .NET Core codebase is not being used for msbuild based builds (i.e., when `$(MSBuildRuntimeType)==Full`) of WPF projects that use WindowsDesktop SDK. Instead, the PresentationBuildTasks.dll from GAC, i.e., the DLL that shipped with .NET Framework, is being used for builds instead.\r\n\r\nThis is because the *first* occurance of an `UsingTask` element that applies to a `TaskName` will always be used - it can not be overridden by subsequent `UsingTask` entries (this is unlike `Property` and `Item` behavior). See note in https://github.com/MicrosoftDocs/visualstudio-docs/blob/master/docs/msbuild/usingtask-element-msbuild.md immediate after the **Syntax** section (Note: The msbuild team added this note after identifying this behavior as part of investiaging this PresentationBuildTasks.dll issue).\r\n\r\nThis fix ensures that the `UsingTask` declarations supplied by the WindowsDesktop SDK precede those supplied by .NET Framework's copy of `Microsoft.WinFX.targets` by introducing a new `.props` file - `Microsoft.WinFX.props` - and moving a small number of `Property` and `UsingTask` declartions into it. Since `.props` are imported before `targets`, the `UsingTask` declarations supplied by WindowsDesktop SDK will thus take precedence.\r\n\r\nNote that `Pbt.props` is used only for building this repo - it doesn't ship.\r\n\r\n## Customer Impact \r\n\r\nMulti-targeted builds targeting .NET Framework will be produced incorrectly under some conditions, specifically when building using VS. There may be no problems initially due to the strong backwards compatibility between .NET Core and .NET Framework WPF assemblies - but errors in XAML/markup compilation may lead to hard-to-identify/debug problems. \r\n\r\n## Regression \r\n\r\nNot a regression. This was a missed corner case not caught until now. \r\n\r\n## Risk \r\n\r\n- The changes are scoped and  safe. \r\n- They have been tested by building a corpus of WPF samples \r\n- The fix has been in .NET 5 for 2 weeks now without any adverse reports. \r\n","Url":"https://github.com/dotnet/wpf/pull/2076","RelatedDescription":"Closed or merged PR \"[release/3.0] Use correct PresentationBuildTasks.dll for VS and MSBuild builds\" (#2076)"},{"Id":"510730574","IsPullRequest":true,"CreatedAt":"2019-10-22T17:58:21","Actor":"rladuca","Number":"2081","RawContent":null,"Title":"[Release/3.1] Change XPS document creation to use FileAccess.ReadWrite instead of FileAccess.Write","State":"closed","Body":"Related to #1985\r\n\r\n5.0 PR: https://github.com/dotnet/wpf/pull/2073\r\n\r\n# Description\r\n\r\nIn .NET Core 3.0 System.IO.Compression's ZipArchive does not support multiple ZipArchiveEntries to be open concurrently when using FileAccess.Write. This is a requirement of the XPS serialization stack in WPF. As such, we need to create XPS documents as FileAccess.ReadWrite in order to allow this behavior.\r\n\r\nNOTE: These sort of changes have been used as a workaround in different, but related cases pre-GA of .NET Core 3 and have worked well.  Codifying them in the product itself helps move developers forward and gives some time to consider a re-design of the XPS serialization stack.\r\n\r\n# Customer Impact\r\nXPS creation when a customer chooses FileAccess.Write will get an exception from:\r\nhttps://github.com/dotnet/corefx/blob/861259bf87d8e4ee2c4f8dab31b73d377faff77d/src/System.IO.Compression/src/System/IO/Compression/ZipArchive.cs#L411\r\n\r\nDevelopers have been instructed to use FileAccess.ReadWrite as a workaround, but this isn't always applicable to library code.\r\n\r\n# Regression\r\nYes.  This is a regression from .NET Framework 4.8 due to switching to `System.IO.Compression` and `System.IO.Packaging` and can potentially block developers from moving their applications to .NET Core.\r\n\r\n# Risk - Low\r\nThe public facing functions that need altering here are on creation of an XPS document where there would generally have been Write access.  Switching to ReadWrite should present no problem.  There is potential for some optimizations to be lost from within the compression and packaging libs, but that is preferable to throwing an exception.\r\n\r\nThe internal functions are being changed as a precaution but are generally concerned with printing streams which are, generally, ReadWrite underneath.  This merely creates the package in the same access mode as the stream. ","Url":"https://github.com/dotnet/wpf/pull/2081","RelatedDescription":"Closed or merged PR \"[Release/3.1] Change XPS document creation to use FileAccess.ReadWrite instead of FileAccess.Write\" (#2081)"},{"Id":"510280177","IsPullRequest":true,"CreatedAt":"2019-10-22T17:51:04","Actor":"rladuca","Number":"2073","RawContent":null,"Title":"Change XPS document creation to use FileAccess.ReadWrite instead of FileAccess.Write.","State":"closed","Body":"Related to #1985\r\n\r\n3.1 PR: https://github.com/dotnet/wpf/pull/2081\r\n\r\n# Description\r\n\r\nIn .NET Core 3.0 System.IO.Compression's ZipArchive does not support multiple ZipArchiveEntries to be open concurrently when using FileAccess.Write. This is a requirement of the XPS serialization stack in WPF. As such, we need to create XPS documents as FileAccess.ReadWrite in order to allow this behavior.\r\n\r\nNOTE: These sort of changes have been used as a workaround in different, but related cases pre-GA of .NET Core 3 and have worked well.  Codifying them in the product itself helps move developers forward and gives some time to consider a re-design of the XPS serialization stack.\r\n\r\n# Customer Impact\r\nXPS creation when a customer chooses FileAccess.Write will get an exception from:\r\nhttps://github.com/dotnet/corefx/blob/861259bf87d8e4ee2c4f8dab31b73d377faff77d/src/System.IO.Compression/src/System/IO/Compression/ZipArchive.cs#L411\r\n\r\nDevelopers have been instructed to use FileAccess.ReadWrite as a workaround, but this isn't always applicable to library code.\r\n\r\n# Regression\r\nYes.  This is a regression from .NET Framework 4.8 due to switching to `System.IO.Compression` and `System.IO.Packaging` and can potentially block developers from moving their applications to .NET Core.\r\n\r\n# Risk - Low\r\nThe public facing functions that need altering here are on creation of an XPS document where there would generally have been Write access.  Switching to ReadWrite should present no problem.  There is potential for some optimizations to be lost from within the compression and packaging libs, but that is preferable to throwing an exception.\r\n\r\nThe internal functions are being changed as a precaution but are generally concerned with printing streams which are, generally, ReadWrite underneath.  This merely creates the package in the same access mode as the stream. ","Url":"https://github.com/dotnet/wpf/pull/2073","RelatedDescription":"Closed or merged PR \"Change XPS document creation to use FileAccess.ReadWrite instead of FileAccess.Write.\" (#2073)"},{"Id":"510762636","IsPullRequest":false,"CreatedAt":"2019-10-22T16:14:09","Actor":"scalablecory","Number":"2082","RawContent":null,"Title":"Would be nice if the controls color theme would take over the theme from the windows settings","State":"open","Body":"_From @PeterPann23 on Tuesday, October 22, 2019 7:01:37 AM_\r\n\r\n# Windows Settings for theme is not applied to controls on winforms elements\r\n\r\n\r\n# General\r\nOne can go over the Windows.UI.ViewManagement.UISettings and apply the themes as development time however as we are starting a new implementation one could already take the theme from windows and apply this on the form, or have a property on the form class that states UseTheme so if the user has \"Dark-Mode\" then the form draws \"Dark-Mode\" for as much as that's possible in a non WPF app. \r\n\r\n\r\n\r\n_Copied from original issue: dotnet/core#3676_","Url":"https://github.com/dotnet/wpf/issues/2082","RelatedDescription":"Open issue \"Would be nice if the controls color theme would take over the theme from the windows settings\" (#2082)"},{"Id":"510709849","IsPullRequest":false,"CreatedAt":"2019-10-22T14:49:10","Actor":"nvmkpk","Number":"2080","RawContent":null,"Title":"VisualState.StateTriggers and VisualState.Setters","State":"open","Body":"Any plans on bringing StateTriggers and Setters from UWP to WPF? These are much simpler to use than the story boards when animation is not required.","Url":"https://github.com/dotnet/wpf/issues/2080","RelatedDescription":"Open issue \"VisualState.StateTriggers and VisualState.Setters\" (#2080)"},{"Id":"510609626","IsPullRequest":true,"CreatedAt":"2019-10-22T13:18:55","Actor":"dotnet-maestro[bot]","Number":"2077","RawContent":null,"Title":"[master] Update dependencies from dotnet/arcade","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:3a1d3bb6-c64d-406d-e8f4-08d648cf64cb)\r\n## From https://github.com/dotnet/arcade\r\n- **Build**: 20191021.4\r\n- **Date Produced**: 10/21/2019 9:44 PM\r\n- **Commit**: f104bcb28e4936b0c0ab7c0d8cb73892ab515e60\r\n- **Branch**: refs/heads/master\r\n- **Updates**:\r\n  - **Microsoft.DotNet.ApiCompat** -> 5.0.0-beta.19521.4\r\n  - **Microsoft.DotNet.Arcade.Sdk** -> 5.0.0-beta.19521.4\r\n  - **Microsoft.DotNet.CodeAnalysis** -> 5.0.0-beta.19521.4\r\n  - **Microsoft.DotNet.GenAPI** -> 5.0.0-beta.19521.4\r\n  - **Microsoft.DotNet.Helix.Sdk** -> 5.0.0-beta.19521.4\r\n\r\n[marker]: <> (End:3a1d3bb6-c64d-406d-e8f4-08d648cf64cb)\r\n\r\n","Url":"https://github.com/dotnet/wpf/pull/2077","RelatedDescription":"Closed or merged PR \"[master] Update dependencies from dotnet/arcade\" (#2077)"},{"Id":"510639255","IsPullRequest":false,"CreatedAt":"2019-10-22T12:59:58","Actor":"DragDropAP","Number":"2079","RawContent":null,"Title":"DragDrop.DoDragDrop not working in wpf , when drag to windows explorer in windows10 #2007","State":"open","Body":"i am using below code to drag and drop the file or folder to windows explorer, it works perfectly for winforms but fails for wpf. \r\nIn WPF the code not work in windows 10 \r\n\r\nstring path = @\"C:\\Rajesh\\documents\\bug\\5.07 testing folder drag\"; StringCollection collection = new StringCollection() { path }; string[] files = { path }; var data = new DataObject(DataFormats.FileDrop, files); data. SetData(DataFormats.Text, files[0]); // Clipboard.SetData(DataFormats.FileDrop, files); // Perform dragdrop DragDrop.DoDragDrop(this, data, DragDropEffects.Copy);","Url":"https://github.com/dotnet/wpf/issues/2079","RelatedDescription":"Open issue \"DragDrop.DoDragDrop not working in wpf , when drag to windows explorer in windows10 #2007\" (#2079)"},{"Id":"510620655","IsPullRequest":true,"CreatedAt":"2019-10-22T12:24:50","Actor":"dotnet-maestro[bot]","Number":"2078","RawContent":null,"Title":"[master] Update dependencies from dnceng/internal/dotnet-wpf-int","State":"open","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:46a15fe4-6c2c-480d-9cdd-08d71053b252)\r\n## From https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int\r\n- **Build**: 20191021.6\r\n- **Date Produced**: 10/22/2019 12:24 AM\r\n- **Commit**: 40bbcf9d8bdfb2e28a2bc3c1de3bc3a7b18310af\r\n- **Branch**: refs/heads/master\r\n- **Updates**:\r\n  - **Microsoft.DotNet.Wpf.DncEng** -> 5.0.0-alpha1.19521.6\r\n\r\n[marker]: <> (End:46a15fe4-6c2c-480d-9cdd-08d71053b252)\r\n\r\n","Url":"https://github.com/dotnet/wpf/pull/2078","RelatedDescription":"Open PR \"[master] Update dependencies from dnceng/internal/dotnet-wpf-int\" (#2078)"},{"Id":"510367912","IsPullRequest":true,"CreatedAt":"2019-10-22T01:45:22","Actor":"vatsan-madhavan","Number":"2074","RawContent":null,"Title":"Use correct PresentationBuildTasks.dll for VS and MSBuild builds","State":"closed","Body":"This is a port of https://github.com/dotnet/wpf/pull/1999 from **master**\r\nFixes #1998 \r\n\r\nThe PresentationBuildTasks.dll built out of the .NET Core codebase is not being used for msbuild based builds (i.e., when `$(MSBuildRuntimeType)==Full`) of WPF projects that use WindowsDesktop SDK. Instead, the PresentationBuildTasks.dll from GAC, i.e., the DLL that shipped with .NET Framework, is being used for builds instead.\r\n\r\nThis is because the *first* occurance of an `UsingTask` element that applies to a `TaskName` will always be used - it can not be overridden by subsequent `UsingTask` entries (this is unlike `Property` and `Item` behavior). See note in https://github.com/MicrosoftDocs/visualstudio-docs/blob/master/docs/msbuild/usingtask-element-msbuild.md immediate after the **Syntax** section (Note: The msbuild team added this note after identifying this behavior as part of investiaging this PresentationBuildTasks.dll issue).\r\n\r\nThe fix ensures that the `UsingTask` declarations supplied by the WindowsDesktop SDK precede those supplied by .NET Framework's copy of `Microsoft.WinFX.targets` by introducing a new `.props` file - `Microsoft.WinFX.props` - and moving a small number of `Property` and `UsingTask` declartions into it. Since `.props` are imported before `targets`, the `UsingTask` declarations supplied by WindowsDesktop SDK will thus take precedence.\r\n\r\nNote that `Pbt.props` is used only for building this repo - it doesn't ship. \r\n","Url":"https://github.com/dotnet/wpf/pull/2074","RelatedDescription":"Closed or merged PR \"Use correct PresentationBuildTasks.dll for VS and MSBuild builds\" (#2074)"},{"Id":"510275612","IsPullRequest":false,"CreatedAt":"2019-10-21T20:36:06","Actor":"dotMorten","Number":"2072","RawContent":null,"Title":"TouchMove intermediate points are not DPI aware","State":"open","Body":"* .NET Core Version: 3.1 Preview1\r\n* Windows version: (`winver`) 1809\r\n* Does the bug reproduce also in WPF for .NET Framework 4.8?: Yes\r\n* Is this bug related specifically to tooling in Visual Studio (e.g. XAML Designer, Code editing, etc...)? No\r\n\r\n **Problem description:**\r\nUsing the TouchMove event in a multi-dpi scenario, the interpolated points returned are not correctly adjusting for DPI, whereas the current point is.\r\nWhen using the event to draw a path, you can see the discrepancy between these two inputs:\r\n![image](https://user-images.githubusercontent.com/1378165/67240439-571cd800-f406-11e9-8b49-6baaad9a1a52.png)\r\nIn this case my main monitor is scale factor 1.5x, whereas my touch-monitor where I'm running the app on is 1.0x.\r\nThe app has been configured to support multi-monitor DPI via the app.manifest.\r\n\r\n**Update:** It appears the root issue here is in a multi-mon dpi aware app, when the DPI changes, the transform applied to the intermediate points are not using the new dpi, as this value is only initialized once.\r\n \r\n **Actual behavior:** <!-- callstack for crashes / exceptions -->\r\nTouch events (red line) are about 30% off from the correct location. If I multiple the location with 1.5, the location is correct (apart from the distance of the window top-bar). This is however weird, as the screen the app is running on is 1.0x screen scale (but main monitor is 1.5x). I'd guess the app registers it needs to run at 1.5 screen scale, then realizes the app is now running at 1.x and but forgot intermediate points should no longer be divided by 1.5x.\r\nIf I multiply the reported values by 1.5, and add the 30px that the canvas has as margin (or remove the margin), I get a perfect alignment.\r\n\r\nNote: The issue does not seem to happen on single-monitor high-dpi setups, so I'm assuming it's related to multiple monitors at different DPIs\r\n\r\n **Expected behavior:**\r\n Intermediate and current touch points coincide.\r\n\r\n **Minimal repro:**\r\nXaml:\r\n```xml\r\n    <Grid>\r\n        <Canvas Margin=\"30\" x:Name=\"canvas\" TouchMove=\"canvas_TouchMove\" IsManipulationEnabled=\"True\" Background=\"White\" />\r\n    </Grid>\r\n```\r\nxaml.cs code-behind:\r\n```cs\r\n     private PathFigure intermediatePoints;\r\n        private PathFigure currentPoint;\r\n\r\n        private void canvas_TouchMove(object sender, TouchEventArgs e)\r\n        {\r\n            foreach (var p in e.GetIntermediateTouchPoints(canvas))\r\n                intermediatePoints = AddVertex(p.Position, intermediatePoints, Colors.Red, 3);\r\n            currentPoint = AddVertex(e.GetTouchPoint(canvas).Position, currentPoint, Colors.Blue, 1);\r\n        }\r\n\r\n        private PathFigure AddVertex(Point point, PathFigure pf, Color color, double width)\r\n        {\r\n            if (pf == null)\r\n            {\r\n                pf = new PathFigure(point, new PathSegment[] { }, false);\r\n                PathGeometry pg = new PathGeometry(new PathFigure[] { pf });\r\n                Path p = new Path() { Data = pg };\r\n                p.StrokeThickness = width;\r\n                p.Stroke = new SolidColorBrush(color);\r\n                canvas.Children.Add(p);\r\n            }\r\n            else\r\n            {\r\n                pf.Segments.Add(new System.Windows.Media.LineSegment(point, true));\r\n            }\r\n            return pf;\r\n        }\r\n```\r\napp.manifest:\r\n```xml\r\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<assembly manifestVersion=\"1.0\" xmlns=\"urn:schemas-microsoft-com:asm.v1\">\r\n  <assemblyIdentity version=\"1.0.0.0\" name=\"MyApplication.app\"/>\r\n  <trustInfo xmlns=\"urn:schemas-microsoft-com:asm.v2\">\r\n    <security>\r\n      <requestedPrivileges xmlns=\"urn:schemas-microsoft-com:asm.v3\">\r\n        <requestedExecutionLevel level=\"asInvoker\" uiAccess=\"false\" />\r\n      </requestedPrivileges>\r\n    </security>\r\n  </trustInfo>\r\n\r\n  <compatibility xmlns=\"urn:schemas-microsoft-com:compatibility.v1\">\r\n    <application>\r\n      <!-- Windows 10 -->\r\n      <supportedOS Id=\"{8e0f7a12-bfb3-4fe8-b9a5-48fd50a15a9a}\" />\r\n    </application>\r\n  </compatibility>\r\n\r\n  <application xmlns=\"urn:schemas-microsoft-com:asm.v3\">\r\n    <windowsSettings>\r\n      <dpiAwareness xmlns=\"http://schemas.microsoft.com/SMI/2016/WindowsSettings\">PerMonitor</dpiAwareness>\r\n      <dpiAware xmlns=\"http://schemas.microsoft.com/SMI/2005/WindowsSettings\">true</dpiAware>\r\n    </windowsSettings>\r\n  </application>\r\n</assembly>\r\n```\r\nMake sure you include the manifest in csproj:\r\n```\r\n  <PropertyGroup>\r\n    <ApplicationManifest>app.manifest</ApplicationManifest>\r\n  </PropertyGroup>\r\n```\r\nRepro project:\r\n[TouchMoveDpiRepro.zip](https://github.com/dotnet/wpf/files/3752777/TouchMoveDpiRepro.zip)\r\n","Url":"https://github.com/dotnet/wpf/issues/2072","RelatedDescription":"Open issue \"TouchMove intermediate points are not DPI aware\" (#2072)"},{"Id":"509923139","IsPullRequest":true,"CreatedAt":"2019-10-21T13:24:41","Actor":"dotnet-maestro[bot]","Number":"2071","RawContent":null,"Title":"[master] Update dependencies from dnceng/internal/dotnet-wpf-int","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:46a15fe4-6c2c-480d-9cdd-08d71053b252)\r\n## From https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int\r\n- **Build**: 20191020.2\r\n- **Date Produced**: 10/21/2019 1:11 AM\r\n- **Commit**: 9735ab802e272ef68c5971bbd16639c3c5e545a3\r\n- **Branch**: refs/heads/master\r\n- **Updates**:\r\n  - **Microsoft.DotNet.Wpf.DncEng** -> 5.0.0-alpha1.19520.2\r\n\r\n[marker]: <> (End:46a15fe4-6c2c-480d-9cdd-08d71053b252)\r\n\r\n","Url":"https://github.com/dotnet/wpf/pull/2071","RelatedDescription":"Closed or merged PR \"[master] Update dependencies from dnceng/internal/dotnet-wpf-int\" (#2071)"},{"Id":"509586963","IsPullRequest":true,"CreatedAt":"2019-10-20T12:48:27","Actor":"dotnet-maestro[bot]","Number":"2068","RawContent":null,"Title":"[master] Update dependencies from dnceng/internal/dotnet-wpf-int","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:46a15fe4-6c2c-480d-9cdd-08d71053b252)\r\n## From https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int\r\n- **Build**: 20191019.8\r\n- **Date Produced**: 10/20/2019 12:13 AM\r\n- **Commit**: 637232344881c144efc1567982562b5c46964467\r\n- **Branch**: refs/heads/master\r\n- **Updates**:\r\n  - **Microsoft.DotNet.Wpf.DncEng** -> 5.0.0-alpha1.19519.8\r\n\r\n[marker]: <> (End:46a15fe4-6c2c-480d-9cdd-08d71053b252)\r\n\r\n","Url":"https://github.com/dotnet/wpf/pull/2068","RelatedDescription":"Closed or merged PR \"[master] Update dependencies from dnceng/internal/dotnet-wpf-int\" (#2068)"},{"Id":"509590308","IsPullRequest":false,"CreatedAt":"2019-10-20T12:44:09","Actor":"mysteryx93","Number":"2069","RawContent":null,"Title":"Trigger Binding to Child Control Not Working","State":"open","Body":"I posted about this elsewhere but I'll report it here since it looks like a bug in WPF (using .NET 4.8)\r\n\r\nI have this on a WPF Window\r\n\r\n    <local:TestControl>\r\n        <local:TestHost />\r\n    </local:MediaPlayer>\r\n\r\nClasses defined like this\r\n\r\n    public class TestControl : ContentControl\r\n    {\r\n        static TestControl()\r\n        {\r\n            DefaultStyleKeyProperty.OverrideMetadata(typeof(TestControl), new FrameworkPropertyMetadata(typeof(TestControl)));\r\n            ContentProperty.OverrideMetadata(typeof(TestControl), new FrameworkPropertyMetadata(ContentChanged, CoerceContent));\r\n        }\r\n    \r\n        private static void ContentChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)\r\n        {\r\n            var P = d as TestControl;\r\n            P.Host = e.NewValue as TestHost;\r\n        }\r\n    \r\n        private static object CoerceContent(DependencyObject d, object baseValue) => baseValue as TestHost;\r\n    \r\n        public static readonly DependencyPropertyKey HostProperty = DependencyProperty.RegisterReadOnly(\"Host\", typeof(TestHost), typeof(TestControl), null);\r\n        public TestHost Host { get => (TestHost)GetValue(HostProperty.DependencyProperty); protected set => SetValue(HostProperty, value); }\r\n    }\r\n    \r\n    public class TestHost : Control\r\n    {\r\n        static TestHost()\r\n        {\r\n            DefaultStyleKeyProperty.OverrideMetadata(typeof(TestHost), new FrameworkPropertyMetadata(typeof(TestHost)));\r\n        }\r\n    \r\n        public static readonly DependencyProperty IsPlayingProperty = DependencyProperty.Register(\"IsPlaying\", typeof(bool), typeof(TestHost), \r\n            new PropertyMetadata(true));\r\n        public bool IsPlaying { get => (bool)GetValue(IsPlayingProperty); set => SetValue(IsPlayingProperty, value); }\r\n    }\r\n\r\nThen in Generic.xaml\r\n\r\n    <Style TargetType=\"{x:Type local:TestControl}\">\r\n        <Setter Property=\"Template\">\r\n            <Setter.Value>\r\n                <ControlTemplate TargetType=\"{x:Type local:TestControl}\">\r\n                    <Border>\r\n                        <Grid>\r\n                            <ContentPresenter Content=\"{TemplateBinding Content}\" />\r\n                            <Button x:Name=\"MyButton\" Content=\"False\" />\r\n                        </Grid>\r\n                    </Border>\r\n                    <ControlTemplate.Triggers>\r\n                        <DataTrigger Value=\"True\" Binding=\"{Binding Host.IsPlaying, RelativeSource={RelativeSource TemplatedParent}}\">\r\n                            <Setter TargetName=\"MyButton\" Property=\"Content\" Value=\"True\" />\r\n                        </DataTrigger>\r\n                    </ControlTemplate.Triggers>\r\n                </ControlTemplate>\r\n            </Setter.Value>\r\n        </Setter>\r\n    </Style>\r\n\r\nIt should display \"true\" in the button, but remains \"false\".\r\n\r\nSetting a breakpoint when setting Host, it does get called and Host does get set correctly.\r\n\r\nI'm getting this in the debug log after changing VS option to display all binding debug info.\r\n\r\n    System.Windows.Data Information: 41 : BindingExpression path error: 'Host' property not found for 'object' because data item is null.  This could happen because the data provider has not produced any data yet. BindingExpression:Path=Host.IsPlaying; DataItem=null; target element is 'TestControl' (Name=''); target property is 'NoTarget' (type 'Object')\r\n    System.Windows.Data Information: 20 : BindingExpression cannot retrieve value due to missing information. BindingExpression:Path=Host.IsPlaying; DataItem=null; target element is 'TestControl' (Name=''); target property is 'NoTarget' (type 'Object')\r\n    System.Windows.Data Information: 21 : BindingExpression cannot retrieve value from null data item. This could happen when binding is detached or when binding to a Nullable type that has no value. BindingExpression:Path=Host.IsPlaying; DataItem=null; target element is 'TestControl' (Name=''); target property is 'NoTarget' (type 'Object')\r\n    System.Windows.Data Information: 20 : BindingExpression cannot retrieve value due to missing information. BindingExpression:Path=Host.IsPlaying; DataItem=null; target element is 'TestControl' (Name=''); target property is 'NoTarget' (type 'Object')\r\n    System.Windows.Data Information: 21 : BindingExpression cannot retrieve value from null data item. This could happen when binding is detached or when binding to a Nullable type that has no value. BindingExpression:Path=Host.IsPlaying; DataItem=null; target element is 'TestControl' (Name=''); target property is 'NoTarget' (type 'Object')\r\n    System.Windows.Data Information: 10 : Cannot retrieve value using the binding and no valid fallback value exists; using default instead. BindingExpression:Path=Host.IsPlaying; DataItem=null; target element is 'TestControl' (Name=''); target property is 'NoTarget' (type 'Object')\r\n\r\nNote that creating a normal binding outside the trigger does work\r\n\r\n    <Button x:Name=\"MyButton\" Content=\"{Binding Host.IsPlaying, RelativeSource={RelativeSource TemplatedParent}}\" />\r\n\r\nHow can I get this trigger binding to work?\r\n\r\nWell... here's \"one\" way\r\n\r\n    <Style TargetType=\"{x:Type local:TestControl}\">\r\n        <Setter Property=\"Template\">\r\n            <Setter.Value>\r\n                <ControlTemplate TargetType=\"{x:Type local:TestControl}\">\r\n                    <Border>\r\n                        <Grid>\r\n                            <ContentPresenter Content=\"{TemplateBinding Content}\" />\r\n                            <Button x:Name=\"MyButton\" Content=\"False\" Height=\"50\" Width=\"100\" />\r\n                            <TextBox x:Name=\"IsPlayingHidden\" Visibility=\"Hidden\" Text=\"{Binding Host.IsPlaying, RelativeSource={RelativeSource TemplatedParent}}\" />\r\n                        </Grid>\r\n                    </Border>\r\n                    <ControlTemplate.Triggers>\r\n                        <Trigger SourceName=\"IsPlayingHidden\" Property=\"Text\" Value=\"True\">\r\n                            <Setter TargetName=\"MyButton\" Property=\"Content\" Value=\"True\" />\r\n                        </Trigger>\r\n                    </ControlTemplate.Triggers>\r\n                </ControlTemplate>\r\n            </Setter.Value>\r\n        </Setter>\r\n    </Style>\r\n\r\nThis works, but it's ugly.\r\n\r\nIt really looks like a bug in the framework.","Url":"https://github.com/dotnet/wpf/issues/2069","RelatedDescription":"Open issue \"Trigger Binding to Child Control Not Working\" (#2069)"},{"Id":"509442924","IsPullRequest":true,"CreatedAt":"2019-10-19T13:31:56","Actor":"dotnet-maestro[bot]","Number":"2067","RawContent":null,"Title":"[master] Update dependencies from dnceng/internal/dotnet-wpf-int","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:46a15fe4-6c2c-480d-9cdd-08d71053b252)\r\n## From https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int\r\n- **Build**: 20191018.9\r\n- **Date Produced**: 10/19/2019 12:23 AM\r\n- **Commit**: 4b2da5152c89443b4bc9e247fa1ee19452757cba\r\n- **Branch**: refs/heads/master\r\n- **Updates**:\r\n  - **Microsoft.DotNet.Wpf.DncEng** -> 5.0.0-alpha1.19518.9\r\n\r\n[marker]: <> (End:46a15fe4-6c2c-480d-9cdd-08d71053b252)\r\n\r\n","Url":"https://github.com/dotnet/wpf/pull/2067","RelatedDescription":"Closed or merged PR \"[master] Update dependencies from dnceng/internal/dotnet-wpf-int\" (#2067)"},{"Id":"509440815","IsPullRequest":true,"CreatedAt":"2019-10-19T13:18:54","Actor":"dotnet-maestro[bot]","Number":"2066","RawContent":null,"Title":"[master] Update dependencies from dotnet/arcade","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:3a1d3bb6-c64d-406d-e8f4-08d648cf64cb)\r\n## From https://github.com/dotnet/arcade\r\n- **Build**: 20191018.2\r\n- **Date Produced**: 10/18/2019 9:12 PM\r\n- **Commit**: f59f1ebe9b293ad523d3bfa4e5cffc663708ef11\r\n- **Branch**: refs/heads/master\r\n- **Updates**:\r\n  - **Microsoft.DotNet.ApiCompat** -> 5.0.0-beta.19518.2\r\n  - **Microsoft.DotNet.Arcade.Sdk** -> 5.0.0-beta.19518.2\r\n  - **Microsoft.DotNet.CodeAnalysis** -> 5.0.0-beta.19518.2\r\n  - **Microsoft.DotNet.GenAPI** -> 5.0.0-beta.19518.2\r\n  - **Microsoft.DotNet.Helix.Sdk** -> 5.0.0-beta.19518.2\r\n\r\n[marker]: <> (End:3a1d3bb6-c64d-406d-e8f4-08d648cf64cb)\r\n\r\n","Url":"https://github.com/dotnet/wpf/pull/2066","RelatedDescription":"Closed or merged PR \"[master] Update dependencies from dotnet/arcade\" (#2066)"},{"Id":"509224055","IsPullRequest":true,"CreatedAt":"2019-10-18T19:37:17","Actor":"rladuca","Number":"2065","RawContent":null,"Title":"Adding more guards in configure-toolset.ps1 to fix issues in publish steps","State":"closed","Body":"","Url":"https://github.com/dotnet/wpf/pull/2065","RelatedDescription":"Closed or merged PR \"Adding more guards in configure-toolset.ps1 to fix issues in publish steps\" (#2065)"},{"Id":"509036895","IsPullRequest":true,"CreatedAt":"2019-10-18T13:13:24","Actor":"dotnet-maestro[bot]","Number":"2064","RawContent":null,"Title":"[master] Update dependencies from dotnet/arcade","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:3a1d3bb6-c64d-406d-e8f4-08d648cf64cb)\r\n## From https://github.com/dotnet/arcade\r\n- **Build**: 20191017.8\r\n- **Date Produced**: 10/17/2019 10:37 PM\r\n- **Commit**: b47a997282b4d347cb079d26515ea4147e2ac548\r\n- **Branch**: refs/heads/master\r\n- **Updates**:\r\n  - **Microsoft.DotNet.ApiCompat** -> 5.0.0-beta.19517.8\r\n  - **Microsoft.DotNet.Arcade.Sdk** -> 5.0.0-beta.19517.8\r\n  - **Microsoft.DotNet.CodeAnalysis** -> 5.0.0-beta.19517.8\r\n  - **Microsoft.DotNet.GenAPI** -> 5.0.0-beta.19517.8\r\n  - **Microsoft.DotNet.Helix.Sdk** -> 5.0.0-beta.19517.8\r\n\r\n[marker]: <> (End:3a1d3bb6-c64d-406d-e8f4-08d648cf64cb)\r\n\r\n","Url":"https://github.com/dotnet/wpf/pull/2064","RelatedDescription":"Closed or merged PR \"[master] Update dependencies from dotnet/arcade\" (#2064)"},{"Id":"508977063","IsPullRequest":false,"CreatedAt":"2019-10-18T09:54:47","Actor":"darcome","Number":"2063","RawContent":null,"Title":"WPF3D improvements.","State":"open","Body":"Good Morning,\r\n\r\nI'd like to know if there are any improvements planned for WPF3D to make it more similar to a modern 3D engine.\r\n\r\nThanks in advance","Url":"https://github.com/dotnet/wpf/issues/2063","RelatedDescription":"Open issue \"WPF3D improvements.\" (#2063)"}],"ResultType":"GitHubIssue"}},"RunOn":"2019-10-23T05:30:53.2285718Z","RunDurationInMilliseconds":656}